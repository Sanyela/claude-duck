(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[520],{14543:(e,s,t)=>{"use strict";t.d(s,{LoginForm:()=>_});var a=t(58081),i=t(82149),r=t(5160),l=t(86810),n=t(80900),c=t(57890),d=t(14604),o=t(49932),m=t(7849),u=t(99076),x=t(13895),h=t(32184),g=t(83585),v=t(47950),p=t.n(v),f=t(19651),j=t(3133),N=t(6314),b=t(32706);let y=["qq.com","outlook.com","foxmail.com","163.com","cloxl.com","52ai.org"],w=e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e),k=e=>{let s=e.split("@");return 2===s.length?s[1].toLowerCase():""},A=e=>{if(!w(e))return!1;let s=k(e);return y.includes(s)},F=e=>e?w(e)?A(e)?null:"不支持的邮箱域名，仅支持: ".concat(y.join(", ")):"请输入有效的邮箱格式":"请输入邮箱地址",V=()=>"支持的邮箱: ".concat(y.join(", "));var R=t(40186);function _(){let e=(0,f.useSearchParams)(),s=(0,f.useRouter)(),{login:t}=(0,b.A)(),v=e.get("tab")||"login",[y,w]=(0,i.useState)(!1),[k,A]=(0,i.useState)(0),[_,C]=(0,i.useState)("email_code"),[T,S]=(0,i.useState)({}),[L,D]=(0,i.useState)({login:{isValid:!0,message:""},register:{isValid:!0,message:""}}),[J,$]=(0,i.useState)({isValid:!0,message:""}),[q,E]=(0,i.useState)(""),[U,B]=(0,i.useState)(""),[z,I]=(0,i.useState)({checked:!1,userExists:!1,actionType:"register",showUsernameField:!1}),[Z,X]=(0,i.useState)({available:!1,loading:!0}),O=()=>{S({})},P=()=>{let e=window.location.hostname,s=window.location.protocol;return"localhost"!==e&&"127.0.0.1"!==e&&"https:"===s&&["www.duckcode.top","duckcode.top"].includes(e)};i.useEffect(()=>{(async()=>{if(!P()){X({available:!1,loading:!1});return}try{let e=await (0,j.e)();X({available:e.success&&e.available,loading:!1})}catch(e){console.error("检查Linux Do配置失败:",e),X({available:!1,loading:!1})}})()},[]);let W=e=>/^\d{6}$/.test(e),G=e=>{for(let[s,t]of Object.entries({邮箱或密码错误:"邮箱或密码错误，请检查后重试",用户名或邮箱已存在:"该用户名或邮箱已被注册，请使用其他信息",邮箱已被注册:"该邮箱已被注册，请使用其他邮箱或尝试登录",邮箱未注册:"该邮箱尚未注册，请先注册账号",验证码错误或已过期:"验证码错误或已过期，请重新获取验证码","发送过于频繁，请稍后再试":"验证码发送过于频繁，请等待1分钟后重试",不支持的邮箱域名:"不支持该邮箱域名，请使用支持的邮箱服务",请求格式错误:"输入信息格式不正确，请检查后重试",密码加密失败:"系统繁忙，请稍后重试",创建用户失败:"注册失败，请稍后重试",生成访问令牌失败:"登录成功但令牌生成失败，请重新登录",验证码存储失败:"系统繁忙，验证码发送失败，请稍后重试",验证码发送失败:"邮件发送失败，请检查邮箱地址或稍后重试"}))if(e.includes(s))return t;return e||"操作失败，请稍后重试"},H=(e,s)=>{let t=F(e),a=null===t;return D(e=>({...e,[s]:{isValid:a,message:t||""}})),a},K=e=>{let s=null,t=!0;return e?e.length<5?(s="用户名至少需要5个字符",t=!1):e.length>20?(s="用户名不能超过20个字符",t=!1):/^[a-zA-Z0-9_-]+$/.test(e)||(s="用户名只能包含字母、数字、下划线和连字符",t=!1):(s="用户名不能为空",t=!1),$({isValid:t,message:s||""}),t},M=async e=>{if(H(e,"login")){try{let s=await (0,j.Ro)({email:e});if(s.success){let e={checked:!0,userExists:s.user_exists,actionType:s.action_type,showUsernameField:!s.user_exists};return I(e),e}}catch(e){console.error("检查邮箱失败:",e)}return null}},Q=async()=>{w(!0),O();try{let e=await (0,j.Sr)();e.success&&e.auth_url?window.location.href=e.auth_url:(0,N.oR)({title:"授权失败",description:e.message||"无法生成授权链接",variant:"destructive"})}catch(e){console.error("Linux Do登录失败:",e),(0,N.oR)({title:"授权失败",description:"连接Linux Do服务失败，请稍后重试",variant:"destructive"})}finally{w(!1)}},Y=()=>{A(60);let e=setInterval(()=>{A(s=>s<=1?(clearInterval(e),0):s-1)},1e3)},ee=async e=>{if(!H(e,"login"))return;let s=z;if(!z.checked){let t=await M(e);if(!t)return;s=t}w(!0),O();try{let t=s.actionType,a=await (0,j.J2)({email:e,type:t});if(a.success)(0,N.oR)({title:"验证码已发送",description:"请查收邮件，验证码10分钟内有效",variant:"default"}),Y(),S(e=>({...e,verification:void 0}));else{let e=G(a.message||"");S(s=>({...s,verification:e})),(0,N.oR)({title:"验证码发送失败",description:e,variant:"destructive"})}}catch(s){console.error("发送验证码出错:",s);let e="网络错误，请检查网络连接后重试";S(s=>({...s,verification:e})),(0,N.oR)({title:"网络错误",description:e,variant:"destructive"})}finally{w(!1)}},es=async(e,s)=>{if(H(e,s)){w(!0),O();try{let t=await (0,j.J2)({email:e,type:s});if(t.success)(0,N.oR)({title:"验证码已发送",description:"请查收邮件，验证码10分钟内有效",variant:"default"}),Y(),S(e=>({...e,verification:void 0}));else{let e=G(t.message||"");S(s=>({...s,verification:e})),(0,N.oR)({title:"验证码发送失败",description:e,variant:"destructive"})}}catch(s){console.error("发送验证码出错:",s);let e="网络错误，请检查网络连接后重试";S(s=>({...s,verification:e})),(0,N.oR)({title:"网络错误",description:e,variant:"destructive"})}finally{w(!1)}}},et=async e=>{e.preventDefault(),w(!0),O();let a=new FormData(e.currentTarget),i=a.get("email"),r=a.get("code"),l=a.get("username");if(!H(i,"login")){w(!1);return}if(!W(r)){S(e=>({...e,email_auth:"请输入6位数字验证码"})),w(!1);return}try{let e=await (0,j.bS)({email:i,code:r,username:l});if(e.success){var n;(0,N.oR)({title:(null===(n=e.message)||void 0===n?void 0:n.includes("注册"))?"注册成功":"登录成功",description:"正在跳转到主页...",variant:"default"}),e.token&&e.user&&t(e.token,e.user),setTimeout(()=>{s.push("/")},100)}else{let s=G(e.message||"");S(e=>({...e,email_auth:s})),(0,N.oR)({title:"认证失败",description:s,variant:"destructive"})}}catch(s){console.error("邮箱验证码认证出错:",s);let e="网络错误，请检查网络连接后重试";S(s=>({...s,email_auth:e})),(0,N.oR)({title:"认证失败",description:e,variant:"destructive"})}finally{w(!1)}},ea=async e=>{e.preventDefault(),w(!0),O();let a=new FormData(e.currentTarget),i=a.get("email"),r=a.get("password");if(!H(i,"login")){w(!1);return}try{let e=await (0,j.iD)({email:i,password:r});if(e.success)(0,N.oR)({title:"登录成功",description:"正在跳转到主页...",variant:"default"}),e.token&&e.user&&t(e.token,e.user),setTimeout(()=>{s.push("/")},100);else{let s=G(e.message||"");S(e=>({...e,login:s})),(0,N.oR)({title:"登录失败",description:s,variant:"destructive"})}}catch(s){console.error("登录出错:",s);let e="网络错误，请检查网络连接后重试";S(s=>({...s,login:e})),(0,N.oR)({title:"登录失败",description:e,variant:"destructive"})}finally{w(!1)}},ei=async e=>{e.preventDefault(),w(!0),O();let a=new FormData(e.currentTarget),i=a.get("username"),r=a.get("email"),l=a.get("password"),n=a.get("code"),c=K(i),d=H(r,"register"),o=W(n);if(!c||!d){w(!1);return}if(!o){S(e=>({...e,register:"请输入6位数字验证码"})),w(!1);return}try{let e=await (0,j.rj)({username:i,email:r,password:l,code:n});if(e.success)(0,N.oR)({title:"注册成功",description:"正在跳转到主页...",variant:"default"}),e.token&&e.user&&t(e.token,e.user),setTimeout(()=>{s.push("/")},100);else{let s=G(e.message||"");S(e=>({...e,register:s})),(0,N.oR)({title:"注册失败",description:s,variant:"destructive"})}}catch(s){console.error("注册出错:",s);let e="网络错误，请检查网络连接后重试";S(s=>({...s,register:e})),(0,N.oR)({title:"注册失败",description:e,variant:"destructive"})}finally{w(!1)}};return(0,a.jsx)("div",{className:"w-full max-w-md",children:(0,a.jsxs)(l.Zp,{className:"shadow-lg bg-card text-card-foreground border-border",children:[(0,a.jsxs)(l.aR,{className:"space-y-4 text-center pb-6",children:[(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)("div",{className:"p-3 rounded-full bg-sky-100 dark:bg-sky-900/20",children:(0,a.jsx)(o.A,{className:"h-8 w-8 text-sky-600 dark:text-sky-400"})})}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(l.ZB,{className:"text-2xl font-bold tracking-tight",children:"email_code"===_?"登录":"欢迎回来 \uD83D\uDC4B"}),(0,a.jsx)(l.BT,{className:"text-muted-foreground",children:"email_code"===_?"":"登录或注册以继续使用我们的服务"})]})]}),(0,a.jsx)(l.Wu,{children:"email_code"===_?(0,a.jsxs)("div",{className:"space-y-4",children:[T.email_auth&&(0,a.jsxs)(R.Fc,{variant:"destructive",children:[(0,a.jsx)(m.A,{className:"h-4 w-4"}),(0,a.jsx)(R.TN,{children:T.email_auth})]}),T.verification&&(0,a.jsxs)(R.Fc,{variant:"destructive",children:[(0,a.jsx)(m.A,{className:"h-4 w-4"}),(0,a.jsx)(R.TN,{children:T.verification})]}),(0,a.jsxs)("form",{onSubmit:et,className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(c.J,{htmlFor:"email-auth",className:"text-sm font-medium",children:"邮箱"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(n.p,{id:"email-auth",name:"email",type:"email",placeholder:"you@example.com",required:!0,className:"h-10 ".concat(L.login.isValid?"":"border-destructive focus-visible:ring-destructive"),onChange:e=>{H(e.target.value,"login"),O(),I({checked:!1,userExists:!1,actionType:"register",showUsernameField:!1})},onBlur:e=>{e.target.value&&L.login.isValid&&M(e.target.value)}}),L.login.message&&(0,a.jsx)("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:L.login.isValid?(0,a.jsx)(u.A,{className:"h-4 w-4 text-green-600"}):(0,a.jsx)(m.A,{className:"h-4 w-4 text-destructive"})})]}),!L.login.isValid&&(0,a.jsxs)("p",{className:"text-xs text-destructive flex items-center gap-1",children:[(0,a.jsx)(m.A,{className:"h-3 w-3"}),L.login.message]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:V()})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)(c.J,{htmlFor:"code-auth",className:"text-sm font-medium",children:["验证码 ",(0,a.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)("div",{className:"relative flex-1",children:[(0,a.jsx)(n.p,{id:"code-auth",name:"code",type:"text",placeholder:"请输入6位验证码",maxLength:6,required:!0,className:"h-10 ".concat(q&&!W(q)?"border-destructive focus-visible:ring-destructive":""),value:q,onChange:e=>{E(e.target.value.replace(/\D/g,"")),O()}}),q&&(0,a.jsx)("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:W(q)?(0,a.jsx)(u.A,{className:"h-4 w-4 text-green-600"}):(0,a.jsx)(m.A,{className:"h-4 w-4 text-destructive"})})]}),(0,a.jsx)(r.$,{type:"button",variant:"outline",size:"sm",disabled:k>0||y||!L.login.isValid,onClick:()=>{let e=document.getElementById("email-auth");ee(null==e?void 0:e.value)},className:"h-10 px-3 whitespace-nowrap",children:k>0?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(x.A,{className:"h-4 w-4 mr-1"}),k,"s"]}):y?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h.A,{className:"h-4 w-4 mr-1 animate-spin"}),"发送中"]}):"获取验证码"})]}),q&&!W(q)&&(0,a.jsxs)("p",{className:"text-xs text-destructive flex items-center gap-1",children:[(0,a.jsx)(m.A,{className:"h-3 w-3"}),"验证码必须是6位数字"]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:'输入邮箱后点击"获取验证码"，系统将自动识别登录或注册'})]}),z.showUsernameField&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)(c.J,{htmlFor:"username-auth",className:"text-sm font-medium",children:["用户名 ",(0,a.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(n.p,{id:"username-auth",name:"username",type:"text",placeholder:"请输入用户名",minLength:5,maxLength:20,pattern:"^[a-zA-Z0-9_-]+$",className:"h-10 ".concat(J.isValid?"":"border-destructive focus-visible:ring-destructive"),value:U,onChange:e=>{B(e.target.value),K(e.target.value),O()}}),J.message&&(0,a.jsx)("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:J.isValid?(0,a.jsx)(u.A,{className:"h-4 w-4 text-green-600"}):(0,a.jsx)(m.A,{className:"h-4 w-4 text-destructive"})})]}),!J.isValid&&(0,a.jsxs)("p",{className:"text-xs text-destructive flex items-center gap-1",children:[(0,a.jsx)(m.A,{className:"h-3 w-3"}),J.message]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"用户名长度为5-20个字符，只能包含字母、数字、下划线和连字符"})]}),(0,a.jsx)(r.$,{type:"submit",className:"w-full h-10",disabled:y||!L.login.isValid||!W(q)||z.showUsernameField&&!J.isValid,children:y?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h.A,{className:"mr-2 h-4 w-4 animate-spin"}),"验证中..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(g.A,{className:"mr-2 h-4 w-4"}),z.checked?"login"===z.actionType?"登录":"注册":"登录/注册"]})})]}),Z.available&&(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsxs)("div",{className:"relative mb-4",children:[(0,a.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,a.jsx)("span",{className:"w-full border-t border-border"})}),(0,a.jsx)("div",{className:"relative flex justify-center text-xs uppercase",children:(0,a.jsx)("span",{className:"bg-card px-2 text-muted-foreground",children:"或"})})]}),(0,a.jsx)(r.$,{type:"button",variant:"outline",className:"w-full h-11 border-blue-200 hover:border-blue-300 hover:bg-blue-50 dark:border-blue-800 dark:hover:border-blue-700 dark:hover:bg-blue-900/20",onClick:Q,disabled:y,children:y?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h.A,{className:"mr-2 h-4 w-4 animate-spin"}),"连接中..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"mr-2 h-4 w-4 rounded bg-blue-600 flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-white text-xs font-bold",children:"L"})}),"使用 Linux Do 登录"]})})]}),(0,a.jsx)("div",{className:"text-center mt-4",children:(0,a.jsx)("button",{type:"button",onClick:()=>C("password"),className:"text-xs text-muted-foreground hover:text-foreground underline",children:"使用密码登录"})})]}):(0,a.jsxs)("div",{children:[(0,a.jsxs)(d.tU,{defaultValue:v,className:"w-full",onValueChange:()=>{O(),E("")},children:[(0,a.jsxs)(d.j7,{className:"grid w-full grid-cols-2 mb-6",children:[(0,a.jsx)(d.Xi,{value:"login",children:"登录"}),(0,a.jsx)(d.Xi,{value:"register",children:"注册"})]}),(0,a.jsxs)(d.av,{value:"login",className:"space-y-4",children:[T.login&&(0,a.jsxs)(R.Fc,{variant:"destructive",children:[(0,a.jsx)(m.A,{className:"h-4 w-4"}),(0,a.jsx)(R.TN,{children:T.login})]}),(0,a.jsxs)("form",{onSubmit:ea,className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(c.J,{htmlFor:"email-login",className:"text-sm font-medium",children:"邮箱"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(n.p,{id:"email-login",name:"email",type:"email",placeholder:"you@example.com",required:!0,className:"h-10 ".concat(L.login.isValid?"":"border-destructive focus-visible:ring-destructive"),onChange:e=>{H(e.target.value,"login"),O()}}),L.login.message&&(0,a.jsx)("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:L.login.isValid?(0,a.jsx)(u.A,{className:"h-4 w-4 text-green-600"}):(0,a.jsx)(m.A,{className:"h-4 w-4 text-destructive"})})]}),!L.login.isValid&&(0,a.jsxs)("p",{className:"text-xs text-destructive flex items-center gap-1",children:[(0,a.jsx)(m.A,{className:"h-3 w-3"}),L.login.message]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:V()})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(c.J,{htmlFor:"password-login",className:"text-sm font-medium",children:"密码"}),(0,a.jsx)(n.p,{id:"password-login",name:"password",type:"password",placeholder:"••••••••",required:!0,className:"h-10",onChange:O})]}),(0,a.jsx)("div",{className:"flex items-center justify-end",children:(0,a.jsx)(p(),{href:"#",className:"text-sm text-sky-600 hover:text-sky-700 dark:text-sky-400 dark:hover:text-sky-300 hover:underline",prefetch:!1,children:"忘记密码?"})}),(0,a.jsx)(r.$,{type:"submit",className:"w-full h-10",disabled:y||!L.login.isValid,children:y?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h.A,{className:"mr-2 h-4 w-4 animate-spin"}),"登录中..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(g.A,{className:"mr-2 h-4 w-4"}),"登录"]})})]})]}),(0,a.jsxs)(d.av,{value:"register",className:"space-y-4",children:[T.register&&(0,a.jsxs)(R.Fc,{variant:"destructive",children:[(0,a.jsx)(m.A,{className:"h-4 w-4"}),(0,a.jsx)(R.TN,{children:T.register})]}),T.verification&&(0,a.jsxs)(R.Fc,{variant:"destructive",children:[(0,a.jsx)(m.A,{className:"h-4 w-4"}),(0,a.jsx)(R.TN,{children:T.verification})]}),(0,a.jsxs)("form",{onSubmit:ei,className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(c.J,{htmlFor:"username-register",className:"text-sm font-medium",children:"用户名"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(n.p,{id:"username-register",name:"username",type:"text",placeholder:"johndoe",required:!0,minLength:5,maxLength:20,pattern:"^[a-zA-Z0-9_-]+$",className:"h-10 ".concat(J.isValid?"":"border-destructive focus-visible:ring-destructive"),onChange:e=>{K(e.target.value),O()}}),J.message&&(0,a.jsx)("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:J.isValid?(0,a.jsx)(u.A,{className:"h-4 w-4 text-green-600"}):(0,a.jsx)(m.A,{className:"h-4 w-4 text-destructive"})})]}),!J.isValid&&(0,a.jsxs)("p",{className:"text-xs text-destructive flex items-center gap-1",children:[(0,a.jsx)(m.A,{className:"h-3 w-3"}),J.message]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"用户名长度为5-20个字符，只能包含字母、数字、下划线和连字符"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(c.J,{htmlFor:"email-register",className:"text-sm font-medium",children:"邮箱"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(n.p,{id:"email-register",name:"email",type:"email",placeholder:"you@example.com",required:!0,className:"h-10 ".concat(L.register.isValid?"":"border-destructive focus-visible:ring-destructive"),onChange:e=>{H(e.target.value,"register"),O()}}),L.register.message&&(0,a.jsx)("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:L.register.isValid?(0,a.jsx)(u.A,{className:"h-4 w-4 text-green-600"}):(0,a.jsx)(m.A,{className:"h-4 w-4 text-destructive"})})]}),!L.register.isValid&&(0,a.jsxs)("p",{className:"text-xs text-destructive flex items-center gap-1",children:[(0,a.jsx)(m.A,{className:"h-3 w-3"}),L.register.message]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:V()})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(c.J,{htmlFor:"password-register",className:"text-sm font-medium",children:"密码"}),(0,a.jsx)(n.p,{id:"password-register",name:"password",type:"password",placeholder:"••••••••",required:!0,className:"h-10",onChange:O})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)(c.J,{htmlFor:"code-register",className:"text-sm font-medium",children:["验证码 ",(0,a.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)("div",{className:"relative flex-1",children:[(0,a.jsx)(n.p,{id:"code-register",name:"code",type:"text",placeholder:"请输入6位验证码",maxLength:6,required:!0,className:"h-10 ".concat(q&&!W(q)?"border-destructive focus-visible:ring-destructive":""),value:q,onChange:e=>{E(e.target.value.replace(/\D/g,"")),O()}}),q&&(0,a.jsx)("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:W(q)?(0,a.jsx)(u.A,{className:"h-4 w-4 text-green-600"}):(0,a.jsx)(m.A,{className:"h-4 w-4 text-destructive"})})]}),(0,a.jsx)(r.$,{type:"button",variant:"outline",size:"sm",disabled:k>0||y||!L.register.isValid,onClick:()=>{let e=document.getElementById("email-register");es(null==e?void 0:e.value,"register")},className:"h-10 px-3 whitespace-nowrap",children:k>0?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(x.A,{className:"h-4 w-4 mr-1"}),k,"s"]}):y?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h.A,{className:"h-4 w-4 mr-1 animate-spin"}),"发送中"]}):"发送验证码"})]}),q&&!W(q)&&(0,a.jsxs)("p",{className:"text-xs text-destructive flex items-center gap-1",children:[(0,a.jsx)(m.A,{className:"h-3 w-3"}),"验证码必须是6位数字"]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"注册需要邮箱验证，请先输入有效邮箱后点击发送验证码"})]}),(0,a.jsx)(r.$,{type:"submit",className:"w-full h-10",disabled:y||!L.register.isValid||!J.isValid||!W(q),children:y?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h.A,{className:"mr-2 h-4 w-4 animate-spin"}),"注册中..."]}):"注册"})]})]})]}),(0,a.jsx)("div",{className:"text-center mt-4",children:(0,a.jsx)("button",{type:"button",onClick:()=>C("email_code"),className:"text-sm text-sky-600 hover:text-sky-700 dark:text-sky-400 dark:hover:text-sky-300 underline",children:"← 返回邮箱验证码登录"})})]})})]})})}},14604:(e,s,t)=>{"use strict";t.d(s,{Xi:()=>d,av:()=>o,j7:()=>c,tU:()=>n});var a=t(58081),i=t(82149),r=t(42044),l=t(87687);let n=r.bL,c=i.forwardRef((e,s)=>{let{className:t,...i}=e;return(0,a.jsx)(r.B8,{ref:s,className:(0,l.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...i})});c.displayName=r.B8.displayName;let d=i.forwardRef((e,s)=>{let{className:t,...i}=e;return(0,a.jsx)(r.l9,{ref:s,className:(0,l.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...i})});d.displayName=r.l9.displayName;let o=i.forwardRef((e,s)=>{let{className:t,...i}=e;return(0,a.jsx)(r.UC,{ref:s,className:(0,l.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...i})});o.displayName=r.UC.displayName},40186:(e,s,t)=>{"use strict";t.d(s,{Fc:()=>c,TN:()=>o,XL:()=>d});var a=t(58081),i=t(82149),r=t(23484),l=t(87687);let n=(0,r.F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),c=i.forwardRef((e,s)=>{let{className:t,variant:i,...r}=e;return(0,a.jsx)("div",{ref:s,role:"alert",className:(0,l.cn)(n({variant:i}),t),...r})});c.displayName="Alert";let d=i.forwardRef((e,s)=>{let{className:t,...i}=e;return(0,a.jsx)("h5",{ref:s,className:(0,l.cn)("mb-1 font-medium leading-none tracking-tight",t),...i})});d.displayName="AlertTitle";let o=i.forwardRef((e,s)=>{let{className:t,...i}=e;return(0,a.jsx)("div",{ref:s,className:(0,l.cn)("text-sm [&_p]:leading-relaxed",t),...i})});o.displayName="AlertDescription"},57890:(e,s,t)=>{"use strict";t.d(s,{J:()=>d});var a=t(58081),i=t(82149),r=t(29716),l=t(23484),n=t(87687);let c=(0,l.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=i.forwardRef((e,s)=>{let{className:t,...i}=e;return(0,a.jsx)(r.b,{ref:s,className:(0,n.cn)(c(),t),...i})});d.displayName=r.b.displayName},64853:(e,s,t)=>{Promise.resolve().then(t.bind(t,14543))},80900:(e,s,t)=>{"use strict";t.d(s,{p:()=>l});var a=t(58081),i=t(82149),r=t(87687);let l=i.forwardRef((e,s)=>{let{className:t,type:i,...l}=e;return(0,a.jsx)("input",{type:i,className:(0,r.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:s,...l})});l.displayName="Input"}},e=>{var s=s=>e(e.s=s);e.O(0,[590,807,976,314,737,480,316,497,954,358],()=>s(64853)),_N_E=e.O()}]);