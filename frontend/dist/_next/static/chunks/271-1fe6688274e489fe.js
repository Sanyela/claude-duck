"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[271],{54271:(e,t,a)=>{a.d(t,{DashboardLayout:()=>H});var r=a(58081),s=a(47950),l=a.n(s),o=a(19651),n=a(36174),c=a(44993),i=a(21100),d=a(34578),h=a(11986),m=a(55765),p=a(21107),f=a(83427),x=a(90018),u=a(12521),g=a(31796),b=a(31511),k=a(11516),v=a(28295),j=a(87687),y=a(5160),N=a(32706),w=a(89181),C=a(87160);let A=[{href:"/",label:"仪表板",icon:c.A,activeColor:"bg-sky-100 text-sky-700 dark:bg-sky-500/20 dark:text-sky-300"},{href:"/subscription",label:"订阅管理",icon:i.A,activeColor:"bg-green-100 text-green-700 dark:bg-green-500/20 dark:text-green-300"},{href:"/credits",label:"积分管理",icon:d.A,activeColor:"bg-amber-100 text-amber-700 dark:bg-amber-500/20 dark:text-amber-300"},{href:"/resources",label:"安装教程",icon:h.A,activeColor:"bg-purple-100 text-purple-700 dark:bg-purple-500/20 dark:text-purple-300"},{href:"/devices",label:"设备管理",icon:m.A,activeColor:"bg-red-100 text-red-700 dark:bg-red-500/20 dark:text-red-300"}],U={href:"/settings",label:"设置",icon:p.A,activeColor:"bg-slate-100 text-slate-700 dark:bg-slate-500/20 dark:text-slate-300"},z=[{href:"/admin/views",label:"数据看板",icon:f.A,activeColor:"bg-emerald-100 text-emerald-700 dark:bg-emerald-500/20 dark:text-emerald-300"},{href:"/admin/users",label:"用户管理",icon:x.A,activeColor:"bg-blue-100 text-blue-700 dark:bg-blue-500/20 dark:text-blue-300"},{href:"/admin/configs",label:"系统配置",icon:p.A,activeColor:"bg-green-100 text-green-700 dark:bg-green-500/20 dark:text-green-300"},{href:"/admin/plans",label:"订阅计划",icon:i.A,activeColor:"bg-purple-100 text-purple-700 dark:bg-purple-500/20 dark:text-purple-300"},{href:"/admin/codes",label:"激活码管理",icon:u.A,activeColor:"bg-orange-100 text-orange-700 dark:bg-orange-500/20 dark:text-orange-300"},{href:"/admin/announcements",label:"公告管理",icon:g.A,activeColor:"bg-blue-100 text-blue-700 dark:bg-blue-500/20 dark:text-blue-300"},{href:"/admin/oauth",label:"OAuth 测试工具",icon:b.A,activeColor:"bg-red-100 text-red-700 dark:bg-red-500/20 dark:text-red-300"}],E="text-slate-600 hover:bg-slate-500/10 dark:text-slate-400 dark:hover:bg-slate-500/10";function R(){let e=(0,o.usePathname)(),{theme:t,setTheme:a}=(0,n.D)(),{user:s}=(0,N.A)(),{appName:c,isLoaded:i}=(0,C.U)(),d=t||"light";return(0,r.jsxs)("aside",{className:"hidden md:flex md:flex-col md:w-56 bg-background sticky top-0 h-screen",children:[(0,r.jsx)("div",{className:"flex h-16 items-center justify-center px-4",children:(0,r.jsx)(l(),{href:"/",className:"font-semibold text-lg text-foreground",prefetch:!1,children:c})}),(0,r.jsxs)("nav",{className:"flex-1 overflow-y-auto py-4 space-y-1",children:[A.map(t=>(0,r.jsxs)(l(),{href:t.href,className:(0,j.cn)("flex items-center gap-3 rounded-full px-4 py-2 mx-2 text-sm font-medium transition-colors",e===t.href?t.activeColor:E),prefetch:!1,children:[(0,r.jsx)(t.icon,{className:"h-4 w-4"}),t.label]},t.href)),(null==s?void 0:s.is_admin)&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"px-4 py-2",children:(0,r.jsx)(w.w,{})}),z.map(t=>(0,r.jsxs)(l(),{href:t.href,className:(0,j.cn)("flex items-center gap-3 rounded-full px-4 py-2 mx-2 text-sm font-medium transition-colors",e===t.href?t.activeColor:E),prefetch:!1,children:[(0,r.jsx)(t.icon,{className:"h-4 w-4"}),t.label]},t.href))]})]}),(0,r.jsxs)("div",{className:"mt-auto p-2 space-y-1 pt-2",children:[(0,r.jsxs)(y.$,{variant:"ghost",onClick:()=>{a("dark"===d?"light":"dark")},className:(0,j.cn)("w-full flex items-center justify-start gap-3 rounded-full px-4 py-2 text-sm font-medium transition-colors",E),children:["dark"===d?(0,r.jsx)(k.A,{className:"h-4 w-4 text-yellow-400"}):(0,r.jsx)(v.A,{className:"h-4 w-4 text-sky-500"}),(0,r.jsx)("span",{children:"切换主题"})]}),(0,r.jsxs)(l(),{href:U.href,className:(0,j.cn)("flex items-center gap-3 rounded-full px-4 py-2 text-sm font-medium transition-colors",e===U.href?U.activeColor:E),prefetch:!1,children:[(0,r.jsx)(U.icon,{className:"h-4 w-4"}),U.label]})]})]})}var _=a(82149),D=a(18112),F=a(23484),L=a(22522);let P=D.bL,V=D.l9;D.bm;let J=D.ZL,S=_.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(D.hJ,{className:(0,j.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...s,ref:t})});S.displayName=D.hJ.displayName;let Y=(0,F.F)("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),$=_.forwardRef((e,t)=>{let{side:a="right",className:s,children:l,...o}=e;return(0,r.jsxs)(J,{children:[(0,r.jsx)(S,{}),(0,r.jsxs)(D.UC,{ref:t,className:(0,j.cn)(Y({side:a}),s),...o,children:[l,(0,r.jsxs)(D.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[(0,r.jsx)(L.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});$.displayName=D.UC.displayName,_.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(D.hE,{ref:t,className:(0,j.cn)("text-lg font-semibold text-foreground",a),...s})}).displayName=D.hE.displayName,_.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(D.VY,{ref:t,className:(0,j.cn)("text-sm text-muted-foreground",a),...s})}).displayName=D.VY.displayName;var O=a(21153);let Z=[{href:"/",label:"仪表板",icon:c.A,activeColor:"bg-sky-100 text-sky-700 dark:bg-sky-500/20 dark:text-sky-300"},{href:"/subscription",label:"订阅管理",icon:i.A,activeColor:"bg-green-100 text-green-700 dark:bg-green-500/20 dark:text-green-300"},{href:"/credits",label:"积分管理",icon:d.A,activeColor:"bg-amber-100 text-amber-700 dark:bg-amber-500/20 dark:text-amber-300"},{href:"/resources",label:"安装教程",icon:h.A,activeColor:"bg-purple-100 text-purple-700 dark:bg-purple-500/20 dark:text-purple-300"}],q={href:"/settings",label:"设置",icon:p.A,activeColor:"bg-slate-100 text-slate-700 dark:bg-slate-500/20 dark:text-slate-300"};function B(){let e=(0,o.usePathname)(),{appName:t,isLoaded:a}=(0,C.U)();return(0,r.jsx)("header",{className:"sticky top-0 z-30 flex h-12 items-center gap-4 bg-background/80 backdrop-blur-sm px-4 md:px-6",children:(0,r.jsxs)(P,{children:[(0,r.jsx)(V,{asChild:!0,children:(0,r.jsxs)(y.$,{variant:"ghost",size:"icon",className:"shrink-0 md:hidden bg-transparent text-foreground hover:bg-accent hover:text-accent-foreground",children:[(0,r.jsx)(O.A,{className:"h-5 w-5"}),(0,r.jsx)("span",{className:"sr-only",children:"切换导航菜单"})]})}),(0,r.jsxs)($,{side:"left",className:"flex flex-col bg-card shadow-xl p-0",children:[(0,r.jsx)("div",{className:"flex h-16 items-center justify-center px-4",children:(0,r.jsx)(l(),{href:"/",className:"font-semibold text-lg text-card-foreground",prefetch:!1,children:t})}),(0,r.jsxs)("nav",{className:"grid gap-2 text-lg font-medium p-4",children:[Z.map(t=>(0,r.jsxs)(l(),{href:t.href,className:(0,j.cn)("flex items-center gap-3 rounded-full px-3 py-2 transition-all",e===t.href?t.activeColor:"text-muted-foreground hover:bg-accent hover:text-accent-foreground"),prefetch:!1,children:[(0,r.jsx)(t.icon,{className:"h-5 w-5"}),t.label]},t.href)),(0,r.jsxs)(l(),{href:q.href,className:(0,j.cn)("flex items-center gap-3 rounded-full px-3 py-2 transition-all",e===q.href?q.activeColor:"text-muted-foreground hover:bg-accent hover:text-accent-foreground"),prefetch:!1,children:[(0,r.jsx)(q.icon,{className:"h-5 w-5"}),q.label]})]})]})]})})}function G(){let e=(0,o.usePathname)(),{appName:t,isLoaded:a}=(0,C.U)();return(0,_.useEffect)(()=>{a&&(document.title=({"/":"".concat(t," - 仪表板"),"/subscription":"".concat(t," - 订阅管理"),"/credits":"".concat(t," - 积分管理"),"/settings":"".concat(t," - 设置"),"/resources":"".concat(t," - 安装教程"),"/login":"".concat(t," - 登录"),"/oauth/authorize":"".concat(t," - 授权"),"/oauth/callback":"".concat(t," - 授权回调")})[e]||t)},[e,t,a]),null}function H(e){let{children:t}=e;return(0,r.jsxs)("div",{className:"flex min-h-screen w-full bg-background",children:[(0,r.jsx)(G,{}),(0,r.jsx)(R,{}),(0,r.jsxs)("div",{className:"flex flex-1 flex-col",children:[(0,r.jsx)(B,{}),(0,r.jsx)("main",{className:"flex-1 p-4 pt-3 sm:p-6 sm:pt-4 lg:p-8 lg:pt-5 overflow-y-auto",children:t})]})]})}},86157:(e,t,a)=>{a.d(t,{zj:()=>s}),a(83849);let r=()=>{let e=window.location.hostname;return"localhost"===e||"127.0.0.1"===e?"http://localhost:9998/api":"www.duckcode.top"===e?"https://api.duckcode.top/api":"/api"},s=async()=>{try{let e=r(),t=await fetch("".concat(e,"/config"),{cache:"no-store"});return await t.json()}catch(e){return console.error("Failed to fetch config:",e),{appName:"Duck Code",apiUrl:r(),installCommand:"npm install -g http://111.180.197.234:7778/install --registry=https://registry.npmmirror.com",docsUrl:"https://github.com/anthropics/claude-code",claudeUrl:"https://api.anthropic.com"}}}},87160:(e,t,a)=>{a.d(t,{U:()=>l});var r=a(82149),s=a(86157);let l=()=>{let[e,t]=(0,r.useState)({appName:"Duck Code",apiUrl:"http://localhost:9998",installCommand:"npm install -g http://111.180.197.234:7778/install --registry=https://registry.npmmirror.com",docsUrl:"https://github.com/anthropics/claude-code",claudeUrl:"https://api.anthropic.com"}),[a,l]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{(0,s.zj)().then(e=>{t(e),l(!0)})},[]),{...e,isLoaded:a}}},89181:(e,t,a)=>{a.d(t,{w:()=>n});var r=a(58081),s=a(82149),l=a(734),o=a(87687);let n=s.forwardRef((e,t)=>{let{className:a,orientation:s="horizontal",decorative:n=!0,...c}=e;return(0,r.jsx)(l.b,{ref:t,decorative:n,orientation:s,className:(0,o.cn)("shrink-0 bg-border","horizontal"===s?"h-[1px] w-full":"h-full w-[1px]",a),...c})});n.displayName=l.b.displayName}}]);